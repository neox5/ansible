# {{ ansible_managed }}
# Caddy Configuration
# Custom role for Debian 13 Trixie

# Global options
{
	email {{ caddy_email }}
}

# Virtual hosts - Reverse proxy with automatic HTTPS
{% for site in caddy_sites %}
{{ site.domain }} {
{% if site.tls is defined %}
{% if site.tls is mapping %}
	tls {{ site.tls.cert }} {{ site.tls.key }}
{% else %}
	tls {{ site.tls }}
{% endif %}
{% endif %}
	reverse_proxy {{ site.backend }}
}

{% endfor %}
