---
# ============================================================================
# PostgreSQL: Universal Defaults
# File: group_vars/all/postgresql.yml
# Role: anxs.postgresql
# ============================================================================
#
# This file contains:
# - REPO: postgresql_defaults.* (our helper variables/constants)
#
# Variable categories:
# - ROLE variables: Set in db/ layer (service-level decisions)
# - REPO variables: Universal constants referenced across layers
#
# Consult role documentation:
# https://github.com/ANXS/postgresql
#
# Variable precedence:
#   all (this file) → db → hw_* → app → host_vars
#
# ROLE variable structure (for reference):
#
# postgresql_databases:
#   - name: dbname
#     owner: username
#     encoding: UTF-8
#     lc_collate: en_US.UTF-8
#     lc_ctype: en_US.UTF-8
#     template: template0
#     state: present
#
# postgresql_users:
#   - name: username
#     pass: password_or_hash
#     encrypted: yes
#     role_attr_flags: "CREATEDB,NOSUPERUSER"  # User attributes defined HERE
#     state: present
#
# postgresql_user_privileges:
#   - name: username
#     db: dbname
#     priv: "ALL"
#     # Note: role_attr_flags NOT used here - belongs in postgresql_users
#
# ============================================================================

# --- REPO: Universal Defaults ---
postgresql_defaults:
  # Server-wide defaults (referenced by db/ layer for ROLE variables)
  server:
    encoding: "UTF-8"
    locale: "en_US.UTF-8"
    ctype: "en_US.UTF-8"

  # Database creation defaults
  # Used by application-level configs (n8n, nextcloud, etc.)
  # Ensures consistent locale/encoding across all databases
  db:
    lc_collate: "en_US.UTF-8"
    lc_ctype: "en_US.UTF-8"
    encoding: "UTF-8"
    template: "template0"

  # Path defaults (Fedora/RHEL pattern)
  paths:
    data_directory: "/var/lib/pgsql/{{ postgresql_version }}/data"
