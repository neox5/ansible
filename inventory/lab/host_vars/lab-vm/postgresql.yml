---
# PostgreSQL test configuration for lab environment
# Uses encrypted credentials from secrets.sops.yml

# Test databases
postgresql_databases:
  - name: testdb
    owner: testuser
    encoding: UTF-8
    lc_collate: en_US.UTF-8
    lc_ctype: en_US.UTF-8
    state: present

  - name: backuptest
    owner: testuser
    encoding: UTF-8
    lc_collate: en_US.UTF-8
    lc_ctype: en_US.UTF-8
    state: present

# Test users
postgresql_users:
  - name: testuser
    password: "{{ testuser_db_password }}"
    encrypted: yes
    role_attr_flags: "CREATEDB,NOSUPERUSER"
    state: present

# Notes:
# - testdb: Primary database for general testing and queries
# - backuptest: Secondary database for pg_dump/pg_restore workflow testing
# - testuser: Has CREATEDB privilege for testing database operations
# - Password referenced from secrets.sops.yml (SOPS-encrypted)
