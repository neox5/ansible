---
# Hardware tuning for N150 class hosts (group: hw_n150)
# Hardware: 12GB RAM, 512GB SSD

# Because this is a list, it REPLACES db/all definitions.
# Therefore it must include the required entries again.
postgresql_global_config_options:
  # Required by role
  - option: unix_socket_directories
    value: '{{ postgresql_unix_socket_directories | join(",") }}'
  - option: log_directory
    value: "log"

  # Memory (tuned for 12GB RAM)
  - option: shared_buffers
    value: "2GB"
  - option: effective_cache_size
    value: "8GB"
  - option: work_mem
    value: "20MB"
  - option: maintenance_work_mem
    value: "512MB"

  # WAL (SSD, larger checkpoints)
  - option: wal_buffers
    value: "16MB"
  - option: min_wal_size
    value: "2GB"
  - option: max_wal_size
    value: "8GB"

  # SSD I/O
  - option: effective_io_concurrency
    value: "200"
  - option: random_page_cost
    value: "1.1"
